/********************************************************************************************
*						GestPymeSOC - DataBase Schemas and Objects Script
* +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
* Prefijo MAT_, para tablas maestras que apliquen para cualquier aplicacion ademas de GestPymeSOC,
* Prefijo GPT_, para tablas del modelo propio de GestPymeSOC
* Prefijo SEGT_, paratablas del modelo de Seguridad Centralizado
* ----------------------------------------------------------------------------------------------------------------------------
* Usar el prefijo ID_, concatenado con el sufijo de la tabla, para columnas de tipo Clave primaria numerica
* Ejemplo: Tabla MAT_PAISES, tiene el sufijo "PAISES" por tanto la columna de clave primaria se llama ID_PAIS
* ----------------------------------------------------------------------------------------------------------------------------
* Para columnas que representen codigos estandar establecidos por entidades gubernamentales o como codificacion
* propia definida internamente, se usa el prefijo COD_
* ----------------------------------------------------------------------------------------------------------------------------
* Para columnas que hacen referencia a valores cuantitativos, por ejemplo Valor de compra, se usa el prefijo
* VLR_, seguido del sufijo correspondiente
*********************************************************************************************/

CREATE CACHED TABLE MAT_PAISES(
	ID_PAIS INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	NOMBRE VARCHAR(128) NOT NULL,
	COD_DANE VARCHAR(4) NOT NULL
);

CREATE CACHED TABLE MAT_DEPARTAMENTOS(
	ID_DEPARTAMENTO INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	COD_DEPARTAMENTO VARCHAR(3) NOT NULL,
	NOMBRE VARCHAR(128) NOT NULL,
	ID_PAIS INTEGER NOT NULL
);

CREATE CACHED TABLE MAT_CIUDADES(
	ID_CIUDAD INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	COD_CIUDAD VARCHAR(4) NOT NULL,
	NOMBRE VARCHAR(128) NOT NULL,
	ID_DEPARTAMENTO INTEGER NOT NULL
);

CREATE CACHED TABLE MAT_BANCOS(
	ID_BANCO INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	COD_BANCO VARCHAR(15),
	NOMBRE VARCHAR(128) NOT NULL,
	ES_VIGENTE VARCHAR(1) DEFAULT 'S' NOT NULL
);

CREATE CACHED TABLE MAT_AGRUPADOR_ESTADOS(
	ID_AGRUPADOR INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	COD_AGRUPADOR VARCHAR(64),
	NOMBRE VARCHAR(128)
);

CREATE CACHED TABLE MAT_ESTADOS(
	ID_ESTADO INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	ID_AGRUPADOR INTEGER NOT NULL,
	COD_ESTADO VARCHAR(64) NOT NULL,
	NOMBRE VARCHAR(128) NOT NULL,
	DESCRIPCION VARCHAR(256),
	ES_ACTIVO VARCHAR(1) DEFAULT 'S' NOT NULL
);

CREATE CACHED TABLE MAT_MAESTRAS(
	ID_MAESTRA INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	COD_MAESTRA VARCHAR(15) NOT NULL,
	NOMBRE VARCHAR(128) NOT NULL
);

CREATE CACHED TABLE MAT_DATOS_MAESTRAS(
	ID_DATO_MAESTRA INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	COD_DATO_MAESTRA VARCHAR(15) NOT NULL,
	ID_MAESTRA INTEGER NOT NULL,
	DESCRIPCION VARCHAR(128) NOT NULL
);

CREATE CACHED TABLE MAT_TIPOS_CONTRIBUYENTE(
	ID_TIPO_CONTRIBUYENTE INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	COD_TIPO_CONTRIBUYENTE VARCHAR(15),
	NOMBRE VARCHAR(128) NOT NULL,
	DESCRIPCION VARCHAR(128),
	RETEFUENTE_RENTA_APLICABLE VARCHAR(1) NOT NULL,
	RETEFUENTE_IVA_APLICABLE VARCHAR(1) NOT NULL,
	RETEFUENTE_ICA_APLICABLE VARCHAR(1) NOT NULL,
	RETEFUENTE_CRE_APLICABLE VARCHAR(1) NOT NULL,
	DECLARA_IVA VARCHAR(1) NOT NULL,
	DECLARA_RENTA VARCHAR(1) NOT NULL,
	DECLARA_ICA VARCHAR(1) NOT NULL,
	DECLARA_CREE VARCHAR(1) NOT NULL,
	USUARIO_CREACION VARCHAR(30) NOT NULL,
	USUARIO_MODIFICACION VARCHAR(30),
	FEC_CREACION TIMESTAMP NOT NULL,
	FEC_MODIFICACION TIMESTAMP
);

/*******************************************************************************************************************************************
	Grupos Tarifarios que definen las tarifas para las actividades economicas
*******************************************************************************************************************************************/
CREATE CACHED TABLE MAT_GRUPOS_TARIFA_ACTI_ECONOM(
	ID_GRUPO_TARIFARIO INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	COD_RUBRO_ECONOMICO VARCHAR(64) NOT NULL,
	COD_GRUPO_TARIFARIO VARCHAR(15) NOT NULL,
	NOMBRE VARCHAR(256),
	UVT_GRAVABLE NUMERIC(16,2),
	VLR_TARIFA_X_MIL_VIGENTE NUMERIC(6,3),
	USUARIO_CREACION VARCHAR(30) NOT NULL,
	USUARIO_MODIFICACION VARCHAR(30),
	FEC_CREACION TIMESTAMP NOT NULL,
	FEC_MODIFICACION TIMESTAMP
);

CREATE CACHED TABLE MAT_ACTIVIDADES_ECONOMICAS(
	ID_ACTIVIDAD_ECONOMICA INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	ID_GRUPO_TARIFARIO INTEGER NOT NULL,
	COD_ACTIVIDAD_CIIU VARCHAR(15),
	NOMBRE VARCHAR(512) NOT NULL,
	DESCRIPCION VARCHAR(512)
);

CREATE CACHED TABLE MAT_TIPOS_IDENTIFICACION(
	ID_TIPO_IDENTIFICACION INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	COD_TIPO_IDENTIFICACION VARCHAR(15) NOT NULL,
	NOMBRE_CORTO VARCHAR(15) NOT NULL,
	DESCRIPCION VARCHAR(128)
);

CREATE CACHED TABLE MAT_GRUPOS_EMPRESARIALES(
	ID_GRUPO_EMPRESARIAL INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	RAZON_SOCIAL VARCHAR(128) NOT NULL,
	IDENTIFICACION_TRIBUTARIA VARCHAR(10) NOT NULL,
	DIGITO_VERIFICACION VARCHAR(1) NOT NULL,
	ID_CIUDAD INTEGER NOT NULL,
	NUM_PBX VARCHAR(15),
	NUM_TELEFONO1 VARCHAR(15),
	NUM_TELEFONO2 VARCHAR(15),
	ID_DIRECCION INTEGER,
	USUARIO_CREACION VARCHAR(30) NOT NULL,
	USUARIO_MODIFICACION VARCHAR(30),
	FEC_CREACION TIMESTAMP NOT NULL,
	FEC_MODIFICACION TIMESTAMP,
	COD_TIPO_VIA_PPAL VARCHAR(15),
	NUMERO_VIA_PPAL VARCHAR(3),
	LETRAS_VIA_PPAL VARCHAR(3),
	BIS VARCHAR(3),
	NUMERO_BIS VARCHAR(3),
	LETRAS_BIS VARCHAR(3),
	CUADRANTE_VIA_PPAL VARCHAR(10),
	COD_COMPLEM_VIA_PPAL VARCHAR(15),
	DETAL_COMPLEM_VIA_PPAL VARCHAR(40),
	NUMERO_VIA_SECUND VARCHAR(3),
	LETRAS_VIA_SECUND VARCHAR(3),
	NUMERO_VIA_COMPLEM VARCHAR(3),
	CUADRANTE_VIA_COMPLEM VARCHAR(10),
	COD_COMPLEM_VIA_COMPLEM VARCHAR(15),
	DETAL_COMPLEM_VIA_COMPLEM VARCHAR(40)
);

CREATE CACHED TABLE MAT_EMPRESAS(
	ID_EMPRESA INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	RAZON_SOCIAL VARCHAR(128) NOT NULL,
	IDENTIFICACION_TRIBUTARIA VARCHAR(10),
	DIGITO_VERIFICACION INTEGER,
	ID_GRUPO_EMPRESARIAL INTEGER NOT NULL,
	ID_CIUDAD INTEGER NOT NULL,
	NUM_PBX VARCHAR(15),
	NUM_TELEFONO1 VARCHAR(15),
	NUM_TELEFONO2 VARCHAR(15),
	CORREO_ELECTRONICO VARCHAR(256),
	ID_DIRECCION INTEGER,
	ID_TIPO_CONTRIBUYENTE INTEGER NOT NULL,
	ID_ACTIVIDAD_ECONOMICA INTEGER NOT NULL,
	ID_BANCO_CONVENIO_NOMINA INTEGER,
	COD_TIPO_PERIODO_NOMINA VARCHAR(30) NOT NULL,
	USUARIO_CREACION VARCHAR(30) NOT NULL,
	USUARIO_MODIFICACION VARCHAR(30),
	FEC_CREACION TIMESTAMP NOT NULL,
	FEC_MODIFICACION TIMESTAMP,
	COD_TIPO_VIA_PPAL VARCHAR(15),
	NUMERO_VIA_PPAL VARCHAR(3),
	LETRAS_VIA_PPAL VARCHAR(3),
	BIS VARCHAR(3),
	NUMERO_BIS VARCHAR(3),
	LETRAS_BIS VARCHAR(3),
	CUADRANTE_VIA_PPAL VARCHAR(10),
	COD_COMPLEM_VIA_PPAL VARCHAR(15),
	DETAL_COMPLEM_VIA_PPAL VARCHAR(40),
	NUMERO_VIA_SECUND VARCHAR(3),
	LETRAS_VIA_SECUND VARCHAR(3),
	NUMERO_VIA_COMPLEM VARCHAR(3),
	CUADRANTE_VIA_COMPLEM VARCHAR(10),
	COD_COMPLEM_VIA_COMPLEM VARCHAR(15),
	DETAL_COMPLEM_VIA_COMPLEM VARCHAR(40)
);


/*******************************************************************************************************************************************
 * Conceptos de pago para determinar las tarifas de retenciones
 * durante las diferentes transacciones de salida de dinero. Ej: Comprobantes de Egreso, etc
 *******************************************************************************************************************************************/
CREATE CACHED TABLE MAT_CONCEPTOS_PAGO(
	ID_CONCEPTO_PAGO INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	NOMBRE VARCHAR(128) NOT NULL,
	DESCRIPCION VARCHAR(128),
	APLICA_EMPLEADOS VARCHAR(1),
	APLICA_PROVEEDORES VARCHAR(1),
	USUARIO_CREACION VARCHAR(30) NOT NULL,
	USUARIO_MODIFICACION VARCHAR(30),
	FEC_CREACION TIMESTAMP NOT NULL,
	FEC_MODIFICACION TIMESTAMP
);

CREATE CACHED TABLE MAT_CONFIG_RETENCIONES(
	ID_CONFIG_RETENCION INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	COD_TIPO_RETENCION VARCHAR(64) NOT NULL,
	COD_TIPO_PERSONA VARCHAR(64),
	ID_CONCEPTO_PAGO INTEGER NOT NULL,
	UVT_GRAVABLE NUMERIC(16,2) NOT NULL,
	VLR_TARIFA NUMERIC(6,3) NOT NULL,
	USUARIO_CREACION VARCHAR(30) NOT NULL,
	USUARIO_MODIFICACION VARCHAR(30),
	FEC_CREACION TIMESTAMP NOT NULL,
	FEC_MODIFICACION TIMESTAMP
);

/*******************************************************************************************************************************************
 * Tablas Terceros, donde se almacena informacion comun para todos los terceros independienemente del tipo de tercero y del tipo de persona,
 * esto es: Clientes, Proveedores, Empleados, etc
 *******************************************************************************************************************************************/
CREATE CACHED TABLE MAT_TERCEROS(
	ID_TERCERO INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	ID_CIUDAD INTEGER NOT NULL,
	ID_DIRECCION INTEGER,
	NUM_TELEFONO1 VARCHAR(15) NOT NULL,
	NUM_TELEFONO2 VARCHAR(15),
	COD_TIPO_PERSONA VARCHAR(64),
	ID_TIPO_CONTRIBUYENTE INTEGER NOT NULL,
	ID_ACTIVIDAD_ECONOMICA INTEGER,
	ID_TIPO_IDENTIFICACION INTEGER NOT NULL,
	NUM_IDENTIFICACION VARCHAR(15) NOT NULL,
	RAZON_SOCIAL VARCHAR(128) NOT NULL, /*Para personas naturales se inserta el nombre completo*/
	PRIMER_NOMBRE VARCHAR(128),
	SEGUNDO_NOMBRE VARCHAR(128),
	PRIMER_APELLIDO VARCHAR(128),
	SEGUNDO_APELLIDO VARCHAR(128),
	CORREO_ELECTRONICO VARCHAR(256),
	USUARIO_CREACION VARCHAR(30) NOT NULL,
	USUARIO_MODIFICACION VARCHAR(30),
	FEC_CREACION TIMESTAMP NOT NULL,
	FEC_MODIFICACION TIMESTAMP,
	COD_TIPO_VIA_PPAL VARCHAR(15),
	NUMERO_VIA_PPAL VARCHAR(3),
	LETRAS_VIA_PPAL VARCHAR(3),
	BIS VARCHAR(3),
	NUMERO_BIS VARCHAR(3),
	LETRAS_BIS VARCHAR(3),
	CUADRANTE_VIA_PPAL VARCHAR(10),
	COD_COMPLEM_VIA_PPAL VARCHAR(15),
	DETAL_COMPLEM_VIA_PPAL VARCHAR(40),
	NUMERO_VIA_SECUND VARCHAR(3),
	LETRAS_VIA_SECUND VARCHAR(3),
	NUMERO_VIA_COMPLEM VARCHAR(3),
	CUADRANTE_VIA_COMPLEM VARCHAR(10),
	COD_COMPLEM_VIA_COMPLEM VARCHAR(15),
	DETAL_COMPLEM_VIA_COMPLEM VARCHAR(40),
	SUBTYPE_DISCRIMINATOR VARCHAR(32)
);

CREATE CACHED TABLE MAT_PARAMETROS_CONFIG(
	ID_PARAM_CONFIG INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	COD_PARAM_CONFIG VARCHAR(64) NOT NULL,
	COD_APLICACION VARCHAR(64),
	DESCRIPCION VARCHAR(128),
	VLR_NUMERICO NUMERIC(16,2),
	VLR_CADENA VARCHAR(256),
	USUARIO_CREACION VARCHAR(30) NOT NULL,
	USUARIO_MODIFICACION VARCHAR(30),
	FEC_CREACION TIMESTAMP NOT NULL,
	FEC_MODIFICACION TIMESTAMP
);

CREATE CACHED TABLE MAT_EPSS(
	ID_EPS INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	COD_EPS VARCHAR(15),
	NOMBRE VARCHAR(128) NOT NULL,
	ES_VIGENTE VARCHAR(1) DEFAULT 'S' NOT NULL
);

CREATE CACHED TABLE MAT_AFPS(
	ID_AFP INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	COD_AFP VARCHAR(15),
	NOMBRE VARCHAR(128) NOT NULL,
	ES_VIGENTE VARCHAR(1) DEFAULT 'S' NOT NULL
);

CREATE CACHED TABLE MAT_ARLS(
	ID_ARL INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	COD_ARL VARCHAR(15),
	NOMBRE VARCHAR(128) NOT NULL,
	ES_VIGENTE VARCHAR(1) DEFAULT 'S' NOT NULL
);

CREATE CACHED TABLE MAT_CCFS(
	ID_CCF INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	COD_CCF VARCHAR(15),
	NOMBRE VARCHAR(128) NOT NULL,
	ES_VIGENTE VARCHAR(1) DEFAULT 'S' NOT NULL
);

